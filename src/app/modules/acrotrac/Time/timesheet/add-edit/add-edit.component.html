<div class="app-content__body timesheet__page">
    <form [formGroup]="AddEditTimeEntryForm">
        <form [formGroup]="AddEditTimeEntryForm">
            <div class="row arrow-row">
                <div class="col-sm-12 arrow-btn-div">
                    <app-weekending-dropdown (OnWeekendingDropdownChange)="onWeekendingDropdownChange($event)"
                        [entityId]="entityId" [AssignmentId]="currAssignmentId">
                    </app-weekending-dropdown>
                </div>
            </div>
        </form>
        <div class="card">
            <div class="card__header">
                <h4 class="card__heading">{{ periodHeading }} <br> <span *ngIf="isInOutEnable" class="card__heading-timeinfo">( <xrm-icon [name]="'clock-in-out'" class="sw-bold"
                    [color]="'dark-blue-color'" [size]="16"></xrm-icon> {{'ClickIconAdjustBillableHoursForDay' | translate}} )</span></h4>
                <div class="card__header-icon">
                    <a href="javascript:;" kendobutton title="{{'TimeConversionGuide' | translate}}"
                        data-bs-toggle="offcanvas" data-bs-target="#hourlyInputDetails" class="color-primary">
                        {{'ViewTimeConversionGuide' | translate}}
                    </a>
                </div>
            </div>
            <div class="card__body">
                <div class="row">
                    <div class="list-view  time-adjustment">
                        <div class="row">
                            <div #scrollTo class=" col-sm-12 col-md-12">
                                <form [formArrayName]="'TimeEntryDetails'">
                                    <ng-template #template let-anchor>
                                        <span>{{ anchor.nativeElement.innerText }}</span>
                                    </ng-template>
                                    <div kendoTooltip [tooltipTemplate]="template" filter=".k-grid td"
                                        (mouseover)="showTooltip($event)">
                                        <kendo-grid [data]="formArray.controls"    [rowClass]="rowCallback" [resizable]="true">
                                            <kendo-grid-column media="(max-width: 920px)" title="Items">
                                                <ng-template kendoGridHeaderTemplate>
                                                    <div class="grid_total_ammount" kendoTooltip>
                                                        <a href="javascript:;" class="add-more__link"
                                                            (click)="dialogPopupOperations().openDialog()"
                                                            title="{{'AddRow' | translate}}">
                                                            <xrm-icon [name]="'plus'" [color]="'dark-blue-color'"
                                                                [size]="magicNumber.fourteen"
                                                                class="sw-bolder"></xrm-icon>
                                                            {{'AddRow' | translate}}</a>
                                                        <span *ngIf="isCopyVisible && !isEditMode">|</span>
                                                        <a *ngIf="isCopyVisible && !isEditMode" href="javascript:;"
                                                            class="add-more__link" (click)="onCopyClick()">
                                                            <xrm-icon [name]="'copy'" [color]="'dark-blue-color'"
                                                                [size]="magicNumber.fourteen"
                                                                class="sw-bold"></xrm-icon>
                                                            {{'CopyPreviousWeek' | translate}}
                                                        </a>
                                                        <a *ngIf="formArray.controls.length && (this.columnWiseTotal.Total > magicNumber.zero)"
                                                            href="javascript:;" kendobutton
                                                            title="{{'ExpandedTimesheetDetails' | translate}}"
                                                            data-bs-toggle="offcanvas" (click)="openExpandedTimesheet()"
                                                            data-bs-target="#viewDetails">
                                                            <xrm-icon [name]="'clipboard-clock'"
                                                                [color]="'dark-blue-color'" [size]="magicNumber.sixteen"
                                                                class="sw-bold"></xrm-icon>
                                                        </a>
                                                    </div>
                                                </ng-template>
                                                <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">

                                                    <dl>
                                                        <dt>{{ 'CostAccountingCode' | translate }}</dt>
                                                        <dd>
                                                            {{dataItem.get('CostAccountingCodeName').value}}
                                                        </dd>
                                                    </dl>
                                                    <dl>
                                                        <dt>{{ 'Shift' | translate}}</dt>
                                                        <dd>
                                                            {{dataItem.get('ShiftName').value}}
                                                        </dd>
                                                    </dl>
                                                    <dl *ngIf="manualOTDtEnabled;else auto">
                                                        <dt>{{ 'HoursType' | translate }}</dt>
                                                        <dd>
                                                            <div *ngIf="isInOutEnable &&  rowIndex === 0">
                                                                <strong class="merged-cell">
                                                                   {{'WorkedHours' | translate}}  <span>(ST+OT+DT)</span>
                                                                </strong>
                                                            </div>
                                                            {{dataItem.get('HoursTypeName').value}}
                                                        </dd>
                                                    </dl>
                                                    <ng-template #auto>
                                                        <dl *ngIf="isInOutEnable && formArray.length>0">
                                                            <dt></dt>
                                                            <dd>
                                                                <div *ngIf="isInOutEnable &&  rowIndex === 0">
                                                                    <strong class="merged-cell">
                                                                        {{'WorkedHours' | translate}}
                                                                    </strong>
                                                                </div>
                                                             
                                                            </dd>
                                                        </dl>
                                                    </ng-template>


                                                    <dl *ngFor="let headerdata of dayOrder;">
                                                        <dt>{{headerValue[headerdata] | date: 'EEE, MMM d'}}</dt>
                                                        <dd>
                                                            <strong *ngIf="isInOutEnable  && rowIndex == 0" class="billableHours-value billable-hour-icon">
                                                                <app-numeric-box [listControlName]="getFormControl(headerdata, rowIndex)" [decimals]="2"  [max]="99.99"  [min]="0"  [isEditMode]="true"></app-numeric-box>
                                                                 <a class="ms-1" href="javascript:;" kendobutton *ngIf="getFormControl(headerdata, 0).value > 0" (click)="clickForAdjustIcon(getFormControl(headerdata, 0).value, headerValue[headerdata])"  kendoTooltip
                                                                class="dayDetails_popup">
                                                                <xrm-icon [name]="'clock-in-out'" class="sw-bold"
                                                                    [color]="'dark-blue-color'" [size]="16"  
                                                                    title="{{'InOutDetails' | translate}}"></xrm-icon>
                                                            </a>
                                                        </strong>
                    
                                                        <app-numeric-box
                                                        *ngIf="dataItem.get('HoursTypeName')?.value != 'PT' && (isInOutEnable ? rowIndex > 0 : true)"
                                                             [isReadOnly]="getFormControl(headerdata, 0).value == 0 && isInOutEnable"
                                                            [listControlName]="getFormControl(headerdata, rowIndex)"
                                                            (click)="isInOutEnable ? clickOnBox($event,getFormControl(headerdata, 0).value, headerValue[headerdata]) : null"
                                                            [ngClass]="{
                                                                'k-disabled': checkReadOnlyValidation(dataItem.value.CostAccountingCodeId, headerdata, rowIndex),
                                                                'custom__numeric-input': getFormControl(headerdata, 0).value == 0 && isInOutEnable
                                                              }"
                                                            [isDisable]="checkReadOnlyValidation(dataItem.value.CostAccountingCodeId, headerdata, rowIndex)"
                                                           
                                                            [min]="magicNumber.zero" [decimals]="magicNumber.two" [maxlength]="magicNumber.five" [max]="99.99"
                                                            >
                                                        </app-numeric-box>
                                                            <div
                                                            *ngIf="
                                                              dataItem.get('HoursTypeName')?.value == 'PT' &&
                                                              !dataItem.get('ShiftName').value &&
                                                              (mealBreakData.MealBreakPenalty ||
                                                                mealBreakData.RestBreakPenalty)
                                                            "
                                                          >
                                                            <app-numeric-box
                                                              [listControlName]="
                                                                getFormControl(
                                                                  headerdata,
                                                                  formArray.controls.length - 1
                                                                )
                                                              "
                                                              [isEditMode]="true"
                                                            ></app-numeric-box>
                                                          </div>
                                                        </dd>

                                                        <app-print-error-message
                                                            [control]="getFormControl(headerdata, rowIndex)">
                                                        </app-print-error-message>
                                                    </dl>

                                                    <dl>
                                                        <dt>{{'Total' | translate}} :
                                                            <span
                                *ngIf="
                                  (rowIndex !== 0 || !isInOutEnable)
                                "
                                >{{
                                  this.gridOperations()
                                    .rowWiseTotal(rowIndex)
                                    .toFixed(2)
                                }}</span>
                                                            | <a  *ngIf="
                                                            (rowIndex !== 0 || !isInOutEnable) &&
                                                            (rowIndex !== formArray.controls.length - 1 ||
                                                              (!mealBreakData.MealBreakPenalty &&
                                                                !mealBreakData.RestBreakPenalty))
                                                          " href="javascript:;" class="red-color"
                                                                title="{{ 'Delete' | translate }}"
                                                                (click)="deleteLineItem(rowIndex)">
                                                                <xrm-icon [name]="'trash-2'" [color]="'red-color'"
                                                                    [size]="magicNumber.sixteen"
                                                                    class="sw-bold"></xrm-icon>
                                                                {{ 'Delete' | translate }}</a>
                                                        </dt>
                                                    </dl>
                                                </ng-template>
                                            </kendo-grid-column>
                                            <kendo-grid-column title="{{ 'CostAccountingCode' | translate }}"
                                                field="CostAccountingCodeName" [width]="magicNumber.twoHundredForty"
                                                media="(min-width: 921px)">
                                                <ng-template kendoGridCellTemplate let-dataItem>
                                                    {{dataItem.get('CostAccountingCodeName').value}}
                                                </ng-template>
                                                <ng-template kendoGridFooterTemplate>
                                                    <div class="grid_total_ammount" kendoTooltip>
                                                        <a href="javascript:;" class="add-more__link"
                                                            (click)="dialogPopupOperations().openDialog()"
                                                            title="{{ 'AddRow' | translate }}">
                                                            <xrm-icon [name]="'plus'" [color]="'dark-blue-color'"
                                                                [size]="magicNumber.fourteen"
                                                                class="sw-bolder"></xrm-icon>
                                                            {{ 'AddRow' | translate
                                                            }}</a>
                                                        <span *ngIf="isCopyVisible && !isEditMode">|</span>
                                                        <a *ngIf="isCopyVisible && !isEditMode" href="javascript:;"
                                                            class="add-more__link" (click)="onCopyClick()">
                                                            <xrm-icon [name]="'copy'" [color]="'dark-blue-color'"
                                                                [size]="magicNumber.fourteen"
                                                                class="sw-bold"></xrm-icon>
                                                            {{ 'CopyPreviousWeek' | translate }}</a>
                                                    </div>
                                                </ng-template>
                                            </kendo-grid-column>
                                            <kendo-grid-column field="ShiftName" title="Shift"
                                                [width]="magicNumber.hundred" media="(min-width: 921px)">
                                                <ng-template kendoGridCellTemplate let-dataItem>
                                                    {{dataItem.get('ShiftName').value}}
                                                </ng-template>
                                                <ng-template [ngIf]="false" kendoGridFooterTemplate>
                                                    <div *ngIf="false" class="text-end total-amount">
                                                        <strong> {{ 'Total' | translate }} </strong>
                                                    </div>
                                                </ng-template>
                                            </kendo-grid-column>
                                            <kendo-grid-column *ngIf="manualOTDtEnabled;else auto" field="HoursTypeName"
                                                title="{{'HoursType' | translate}}" [width]="magicNumber.Ninety" [width] ="140"
                                                media="(min-width: 923px)">
                                        
                                                <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                                                    <div *ngIf="isInOutEnable &&  rowIndex === 0">
                                                        <strong class="merged-cell">
                                                           {{'WorkedHours' | translate}}  <span>(ST+OT+DT)</span>
                                                        </strong>
                                                    </div>
                                                    <div>
                                                        {{dataItem.get('HoursTypeName').value}}
                                                    </div>
                                                </ng-template>
                                                <ng-template [ngIf]="formArray.length" kendoGridFooterTemplate>
                                                    <div *ngIf="formArray.length" class="text-end total-amount">
                                                        <strong> {{ 'Total' | translate }} </strong>
                                                    </div>
                                                </ng-template>
                                            </kendo-grid-column>

                                 <ng-template #auto >
                                    <kendo-grid-column   *ngIf=" isInOutEnable && formArray.length>0"
                                     [width]="140"
                                    media="(min-width: 921px)">
    
                                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                                        <div *ngIf="isInOutEnable &&  rowIndex === 0">
                                            <strong class="merged-cell">
                                               {{'WorkedHours' | translate}}
                                            </strong>
                                   
                                        </div>
                                      
                                    </ng-template>
                                    <ng-template [ngIf]="formArray.length" kendoGridFooterTemplate>
                                        <div *ngIf="formArray.length" class="text-end total-amount">
                                            <strong> {{ 'Total' | translate }} </strong>
                                        </div>
                                    </ng-template>
                                </kendo-grid-column>
                                 </ng-template>
                                            <kendo-grid-column *ngFor="let headerdata of dayOrder" [field]="headerdata"
                                                media="(min-width: 921px)">
                                                <ng-template kendoGridHeaderTemplate>
                                                    <div class="day-header">
                                                        <div class="grid__header-th">
                                                            {{ headerValue[headerdata] | date:"EEE" }}
                                                            <p>{{ headerValue[headerdata] | date:"MMM d" }}</p>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                                <ng-template kendoGridCellTemplate let-rowIndex="rowIndex" let-dataItem>
                                                    <div>
                                                        <strong *ngIf="isInOutEnable  && rowIndex == 0" class="billableHours-value billable-hour-icon">
                                                            <app-numeric-box [listControlName]="getFormControl(headerdata, rowIndex)" [isEditMode]="true" [decimals]="2"  [max]="99.99"  [min]="0"></app-numeric-box>
                                                             <a class="ms-1" href="javascript:;" kendobutton *ngIf="getFormControl(headerdata, 0).value > 0" (click)="clickForAdjustIcon(getFormControl(headerdata, 0).value,headerValue[headerdata])"  kendoTooltip
                                                            class="dayDetails_popup">
                                                            <xrm-icon [name]="'clock-in-out'" class="sw-bold"
                                                                [color]="'dark-blue-color'" [size]="16"  
                                                                title="{{'InOutDetails' | translate}}"></xrm-icon>
                                                        </a>
                                                    </strong>
                                                
                                                  <app-numeric-box
                                                  *ngIf="dataItem.get('HoursTypeName')?.value != 'PT' && (isInOutEnable ? rowIndex > 0 : true)"
                                                       [isReadOnly]="getFormControl(headerdata, 0).value == 0 && isInOutEnable"
                                                      [listControlName]="getFormControl(headerdata, rowIndex)"
                                                      (click)="isInOutEnable ? clickOnBox($event,getFormControl(headerdata, 0).value, headerValue[headerdata]) : null"
                                                      [ngClass]="{
                                                        'k-disabled': checkReadOnlyValidation(dataItem.value.CostAccountingCodeId, headerdata, rowIndex),
                                                        'custom__numeric-input': getFormControl(headerdata, 0).value == 0 && isInOutEnable
                                                      }"
                                                      [isDisable]="checkReadOnlyValidation(dataItem.value.CostAccountingCodeId, headerdata, rowIndex)"
                                                   
                                                      [min]="magicNumber.zero" [decimals]="magicNumber.two" [maxlength]="magicNumber.five" [max]="99.99"
                                                      >
                                                  </app-numeric-box>
                                                        <app-print-error-message
                                                            [control]="getFormControl(headerdata, rowIndex)"></app-print-error-message>
                                                    </div>
                                                    <div
                                                    *ngIf="
                                                      dataItem.get('HoursTypeName')?.value == 'PT' &&
                                                      !dataItem.get('ShiftName').value &&
                                                      (mealBreakData.MealBreakPenalty ||
                                                        mealBreakData.RestBreakPenalty)
                                                    "
                                                  >
                                                    <app-numeric-box
                                                      [listControlName]="
                                                        getFormControl(
                                                          headerdata,
                                                          formArray.controls.length - 1
                                                        )
                                                      "
                                                      [isEditMode]="true"
                                                    ></app-numeric-box>
                                                  </div>
                                                </ng-template>
                                                <div *ngIf="formArray.length">
                                                    <ng-template kendoGridFooterTemplate let-dataItem>
                                                        <div class="total-time"><strong>
                                                                {{this.gridOperations().columnWiseTotal(headerdata).toFixed(magicNumber.two)}}
                                                            </strong></div>
                                                    </ng-template>
                                                </div>
                                            </kendo-grid-column>

                                            <kendo-grid-column title="{{ 'Total' | translate }}"
                                                media="(min-width: 921px)" [width]="magicNumber.sixty">
                                                <div *ngIf="formArray.length">
                                                    <ng-template kendoGridFooterTemplate>
                                                        <div class="grid_total_ammount">
                                                            <strong> {{calculateTotalHours().toFixed(magicNumber.two)}}
                                                            </strong>
                                                        </div>
                                                    </ng-template>
                                                </div>
                                                <div *ngIf="formArray.length">
                                                    <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
                                                        <div class="grid_total_ammount"
                                                        *ngIf="
                                (rowIndex !== 0 || !isInOutEnable) 
                              "
                                                        >
                                                            {{this.gridOperations().rowWiseTotal(rowIndex).toFixed(magicNumber.two)}}
                                                        </div>
                                                    </ng-template>
                                                </div>
                                            </kendo-grid-column>
                                            <kendo-grid-column media="(min-width: 921px)" [width]="magicNumber.fifty">
                                                <ng-template kendoGridCellTemplate let-rowIndex="rowIndex" let-dataItem>
                                                    <a href="javascript:;" class="red-color" *ngIf="(rowIndex !== 0 || !isInOutEnable) && (rowIndex !== formArray.controls.length - 1 || (!mealBreakData.MealBreakPenalty && !mealBreakData.RestBreakPenalty))" kendoTooltip
                                                        (click)="deleteLineItem(rowIndex)">
                                                        <xrm-icon [name]="'trash-2'" [color]="'red-color'"
                                                            [size]="magicNumber.sixteen"
                                                            title="{{ 'Delete' | translate }}"
                                                            class="sw-bold"></xrm-icon>
                                                    </a>
                                                </ng-template>
                                                <ng-template kendoGridFooterTemplate>
                                                    <div
                                                        *ngIf="formArray.controls.length && (this.columnWiseTotal.Total > magicNumber.zero)">
                                                        <a href="javascript:;" kendobutton kendoTooltip
                                                            data-bs-toggle="offcanvas" (click)="openExpandedTimesheet()"
                                                            data-bs-target="#viewDetails">
                                                            <xrm-icon [name]="'clipboard-clock'"
                                                                [color]="'dark-blue-color'" [size]="magicNumber.sixteen"
                                                                title="{{ 'ExpandedTimesheetDetails' | translate }}"
                                                                class="sw-bold"></xrm-icon>
                                                        </a>
                                                    </div>
                                                </ng-template>
                                            </kendo-grid-column>
                                            <ng-template kendoGridNoRecordsTemplate>
                                                <p #container (click)="handleClick($event)"
                                                    [innerHTML]="'TimesheetGridFooterMsg' | translate: { placeholder1: timesheetGridFooterMsg } | safe: 'html'">
                                                </p>
                                            </ng-template>
                                        </kendo-grid>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <!-- Card Header Section-->
            <div class="card__header">
                <h4 class="card__heading">{{ 'Comments' | translate }}</h4>
            </div>
            <!-- End Card Header Section-->

            <!-- Card Body Section-->
            <div class="card__body pt-0">
                <div class="row">
                    <!-- input box start -->
                    <div class="col-sm-12 col-md-12">
                        <div class="form-group" *ngIf="(isEditMode && currTimesheetStatus != draftId)">
                            <app-kendo-label [label]="'ReviewerComment'"></app-kendo-label>
                            <div *ngFor="let detail of this.AddEditTimeEntryForm.get('ReviewerComment')?.value"
                                class="reviews__signature">
                                <p>{{ detail.ReviewedOnDate | date: dateFormat }}</p>
                                <p>{{ detail.ApproverComments }} <span> - {{ detail.ApproverLabel }} </span></p>
                            </div>
                        </div>
                    </div>
                    <!-- input box end -->
                    <div class="col-sm-12 col-md-12">
                        <div class="form-group">
                            <app-kendo-textarea [maxCharacters]="magicNumber.twoThousand"
                                [controlName]="'ContractorComments'" [label]="'ContractorComment'">
                            </app-kendo-textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--  Page Footer Section-->
        <div class="page-footer">
            <div class="row">
                <div class="col-sm-6">
                    <div class="ms-2 first-button-set">
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="btn-box btn-box--center">
                        <button type="button" kendoButton fillMode="outline" themeColor="primary" (click)="backToList()">
                            {{ "Cancel" | translate }}
                        </button>
                        @if(this.timesheetConfigDetails?.PreDefinedWorkScheduleId == magicNumber.oneHundredThirty ||
                        this.timesheetConfigDetails?.PreDefinedWorkScheduleId == magicNumber.oneHundredTwentyEight) {
                        <button type="button" kendoButton themeColor="primary" fillMode="outline"
                            (click)="timesheetDialogOperations().submitNewForm('Draft')" appFocusOnError
                            [formName]="AddEditTimeEntryForm"
                            *ngIf="(currTimesheetStatus == draftId || currTimesheetStatus == submittedId)"
                            [disabled]="(isEditMode?((AddEditTimeEntryForm.pristine )|| (formArray.controls.length ? (false || !calculateTotalHours()) : true))  : (formArray.controls.length) ? (false || !calculateTotalHours()) : true)">
                            {{'SaveAsDraft' | translate}}
                        </button>
                        <button type="button" kendoButton themeColor="primary" (click)="onSubmitClick()" appFocusOnError
                            [formName]="AddEditTimeEntryForm"
                            [disabled]="!(currTimesheetStatus == draftId)?((AddEditTimeEntryForm.pristine) || (formArray.controls.length ? false:true)) : (formArray.controls.length) ? false : true">
                            {{ 'SubmitForApproval' | translate }}
                        </button>
                        } @else {
                        <button type="button" kendoButton themeColor="primary" fillMode="outline"
                            (click)="timesheetDialogOperations().submitNewForm('Draft')" appFocusOnError
                            [formName]="AddEditTimeEntryForm"
                            *ngIf="(currTimesheetStatus == draftId || currTimesheetStatus == submittedId)"
                            [disabled]="true">
                            {{'SaveAsDraft' | translate}}
                        </button>
                        <button type="button" kendoButton themeColor="primary" (click)="onSubmitClick()" appFocusOnError
                            [formName]="AddEditTimeEntryForm" [disabled]="true">
                            {{ 'SubmitForApproval' | translate }}
                        </button>
                        }
                    </div>
                </div>
                <kendo-dialog class="dailog dailog-center" *ngIf="timesheetDialogDisplay" [width]="600">
                    <a href="javascript:;" class="close-dailog" (click)="timesheetDialogOperations().closeDialog()">
                        <xrm-icon name="x" color="black-color" [size]="18" [strokeWidth]="2.5"></xrm-icon>
                    </a>
                    <xrm-icon name="circle-question-mark" color="dark-blue-color" [size]="40"
                        class="text-primary dailog__icon sw-bolder"></xrm-icon>
                    <p>{{'TimeEntryMessage' | translate}}</p>
                    <div class="dailog__button">
                        <button type="button" kendoButton fillMode="solid" themeColor="primary"
                            (click)="timesheetDialogOperations().submitNewForm((isEditMode) ? 'Edit': 'Add')">
                            {{ "CertifyConfirm" | translate }}
                        </button>
                        <button type="button" kendoButton fillMode="outline" themeColor="primary"
                            (click)="timesheetDialogOperations().closeDialog()">
                            {{ "Cancel" | translate }}
                        </button>
                    </div>

                </kendo-dialog>
            </div>
        </div>
        <!-- End Footer Section-->

        <form [formGroup]="AddNewLineForm">
            <!--- Add to Satffing Agency dialog -->
            <kendo-dialog class="dailog" (close)="onDecline()" *ngIf="isAddNewPopupOpen" [width]="420">
                <a href="javascript:;" class="close-dailog" (click)="dialogPopupOperations().closeDialog()">
                    <xrm-icon name="x" color="black-color" [size]="18" [strokeWidth]="2.5"></xrm-icon>
                </a>
                <xrm-icon name="circle-plus" color="dark-blue-color" [size]="40"
                    class="text-primary dailog__icon sw-bolder"></xrm-icon>
                <h3 class="dailog__title d-flex justify-content-center"> {{ 'AddNewLineItem' | translate }} </h3>
                <div class="form-scroll">
                    <div class=" col-sm-12 col-md-12">
                        <div class="form-group">
                            <app-kendo-dropdown [list]="CostAccountingCodeList" [label]="'CostAccountingCode'"
                                [placeholder]="'DdlSelect'" [isRequired]="true" [controlName]="'CostAccountingCodeId'">
                            </app-kendo-dropdown>
                        </div>
                    </div>
                    <div class=" col-sm-12 col-md-12">
                        <div class="form-group">
                            <app-kendo-dropdown [list]="ShiftList" [label]="'Shift'" [placeholder]="'DdlSelect'"
                                [isRequired]="true" [controlName]="'ShiftId'">
                            </app-kendo-dropdown>
                        </div>
                    </div>
                    <div *ngIf="manualOTDtEnabled" class=" col-sm-12 col-md-12">
                        <div class="form-group">
                            <app-kendo-dropdown [list]="HoursTypeList" [label]="'HoursType'" [placeholder]="'DdlSelect'"
                                [isRequired]="true" [controlName]="'HoursTypeId'">
                            </app-kendo-dropdown>
                        </div>
                    </div>
                </div>
                <div class="dailog__button text-center">
                    <button type="button" kendoButton fillMode="solid" themeColor="primary"
                        (click)="onClickAddNewLineItem()"> {{ 'Ok' | translate }} </button>
                    <button type="button" kendoButton fillMode="outline" themeColor="primary"
                        (click)="dialogPopupOperations().closeDialog()">
                        {{ "Cancel" | translate }} </button>
                </div>
            </kendo-dialog>
        </form>
        <!-- Add to Satffing Agency dialog -->
    </form>
    <app-assignment-more-details [assignmentId]="currAssignmentId.toString()" [recordId]="approvalId"
        [assignmentDetails]="assignmentDetailsFromSession" [isAssignDetailsNeedFromApi]="isEditMode"
        [isTimeSheet]="true" (assignmentMoreDataEmitter)="bindingTimeSheetDetails($event)" [entityId]="entityId"
        (currencyCode)="setCurrencyCode($event)" [hourDistributionRuleName]="hourDistributionRuleName"
        [OtEligibility]="OtEligibility" [weekendingDate]="currWeekendingDate"></app-assignment-more-details>
    <app-expended-timesheet-details *ngIf="isExpandedDetails" (changeIsExpandedDetails)="changeIsExpandedDetails()"
        [isExpandedDetails]="isExpandedDetails" [TimesheetPeriodRange]="periodHeading" [apiResponse]="expendedApiRes"
        [currencyCode]="currencyCode" [isPenaltyApplied]="penaltyApplied"></app-expended-timesheet-details>
    <app-time-conversion-guide></app-time-conversion-guide>
    <app-time-in-out
    [isShow]="isClickBox"
    [Ukey]="mealBreakData.Ukey"
    [data]="daysData"
    [day]="weekday"
    (apply)="onApply($event)"
    *ngIf="isClickBox"
    [selectedDate]="selectedDate"
    (onClose)="onClose($event)"
    [weekEndingDate]="currWeekendingDate"
    [mealBreakConfigurationData]="mealBreakData"
    [isManual]="false"
  ></app-time-in-out>
</div>
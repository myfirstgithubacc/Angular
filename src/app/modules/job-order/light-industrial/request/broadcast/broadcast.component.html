<div class="app-content__body">
    <form [formGroup]="broadcastForm">
        <div class="col-xs-12 col-md-12">
            <app-status-bar-li [statusId]="statusId" [approverlength]="approverLength"
                [isEditMode]="isEditMode"></app-status-bar-li>
        </div>

        <div class="row LI-industrial__expansion">
            <div class="col-md-12">

                <!--First Card Section-->
                <kendo-expansionpanel class="card card--inverse">
                    <ng-template kendoExpansionPanelTitleDirective>
                        <h4 class="card__heading">{{'RequisitionQuickView' | translate}}</h4>
                        <div class="card__header-icon">
                            <div class="card__header-icon--error">
                                <xrm-icon name="alert-triangle" color="red-color" [size]="18"
                                    class="sw-bold"></xrm-icon>
                            </div>
                        </div>
                    </ng-template>
                    <!-- End Card Header Section-->
                    <div class="card__body">
                        <div class="card__body--inner-wrapper">
                            <div class="row">
                                <div class="col-sm-12 col-md-12">
                                    <div class="view__screen">
                                        <ul class="list__data">
                                            <li class="list__data--item"> <strong class="kendo-label">{{'RequestId' |
                                                    translate}}</strong>
                                                <span class="data-answere"><a href="javascript:;" class="request_id"
                                                        data-bs-toggle="offcanvas"
                                                        data-bs-target="#requestSidebar2">{{liRequestDetails?.RequestCode}}</a></span>
                                            </li>
                                            <li class="list__data--item"> <strong
                                                    class="kendo-label">{{'RequestingPrimaryManagerName' |
                                                    translate}}</strong>
                                                <span
                                                    class="data-answere">{{liRequestDetails?.RequestingManagerName}}</span>
                                            </li>
                                            <li class="list__data--item"> <strong class="kendo-label">{{'JobCategory' |
                                                    translate}}</strong>
                                                <span class="data-answere">{{liRequestDetails?.JobCategoryName}}</span>
                                            </li>
                                            <li class="list__data--item"> <strong class="kendo-label">{{'Location' |
                                                    translate}}</strong>
                                                <span class="data-answere">{{liRequestDetails?.WorkLocationName}} <br>
                                                    <span class="achor__text">
                                                        {{liRequestDetails?.LocationAddress}}</span></span>
                                            </li>
                                            <li class="list__data--item"> <strong
                                                    class="kendo-label">{{'NoOfRequestedContractor' |
                                                    translate}}</strong>
                                                <span class="data-answere">{{liRequestDetails?.PositionNeeded}}</span>
                                            </li>
                                            <li class="list__data--item"> <strong class="kendo-label">{{'Shift' |
                                                    translate}}</strong>
                                                <span
                                                    class="data-answere">{{liRequestDetails?.RequestShiftDetailGetAllDto?.ShiftName}}
                                                    <br>
                                                    <div class="dropdown__shift-range">
                                                        <div class="form-group mb-0">
                                                            <div class="dropdown__shift-range--input">
                                                                <div class="achor__text">
                                                                    <app-weekday-picker [dayInfo]="daysInfo"
                                                                        [isWeekdayEditMode]="false"
                                                                        [timeRangeProperties]="timeRange"
                                                                        [isReadonly]="false" [timeFormat]="'hh:mm a'"
                                                                        [startTimeControlName]="'startTimeControlName'"
                                                                        [endTimeControlName]="'endTimeControlName'"></app-weekday-picker>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </span>
                                            </li>
                                            <li class="list__data--item"> <strong
                                                    class="kendo-label">{{'HourDistribution' | translate}}</strong>
                                                <span
                                                    class="data-answere">{{liRequestDetails?.HourDistributionRuleName}}</span>
                                            </li>
                                            <li class="list__data--item"> <strong class="kendo-label">{{'StartDate' |
                                                    translate}}</strong>
                                                <span class="data-answere">{{startDate}}</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </kendo-expansionpanel>
                <!--End First Card Section-->

                <!--Second Card Section-->
                <kendo-expansionpanel [expanded]="isPanelOpen1" class="card" [ngClass]="panelClass1"
                    (expandedChange)="togglePanelState1()">
                    <ng-template kendoExpansionPanelTitleDirective>
                        <h4 class="card__heading">{{'BroadcastDetails' | translate}}</h4>
                        <div class="card__header-icon">
                            <div *ngIf="!isPanelOpen1" class="card__header-icon--error">
                                <xrm-icon name="alert-triangle" color="red-color" [size]="18"
                                    class="sw-bold"></xrm-icon>
                            </div>
                        </div>
                    </ng-template>
                    <!-- End Card Header Section-->
                    <div class="card__body">
                        <div class="row">
                            <div class="col-sm-12 col-md-12">
                                <div class="card__body--inner-wrapper">
                                    <div class="mb-3">
                                        <div class="view__screen">
                                            <ul class="list__data">
                                                <li class="list__data--item border-bottom"> <strong
                                                        class="kendo-label">{{'LastBroadcastRound' |
                                                        translate}}</strong>
                                                    <span class="data-answere">{{broadCastRound}}</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Input Box Start -->
                            <div class="col-sm-4 col-md-4">
                                <div class="form-group">
                                    <app-kendo-dropdown [list]="broadCastRoundDropdown" [label]="'BroadcastRound'"
                                        [controlName]="'broadcastRound'" [placeholder]="'DdlSelect'"
                                        [isRequired]="true">
                                    </app-kendo-dropdown>
                                </div>
                            </div>
                            <!-- Input Box End -->

                            <div *ngIf="isOverrideConfiguredDelayedNotification" class="col-sm-12 col-md-12">
                                <div class="form-group">
                                    <app-kendo-switch [label]="'OverrideConfiguredNotification'"
                                        [controlName]="'overrideConfiguredDelayedNotification'" [onLabel]="'Yes'"
                                        [offLabel]="'No'"></app-kendo-switch>
                                </div>
                            </div>

                            <div class="col-sm-12">
                                <div class="form-group">
                                    <div class="col-sm-12 col-md-12 halfGridCol2 tree-bxs">
                                        <app-tree-view [label]="'StaffingAgency'" [data]="staffingAgencyList"
                                            [isFiltered]="false" [textField]="'text'"
                                            (onCheckedTree)="selectedStaffingAgency($event)" [checkedKeys]="checkedKeys"
                                            [childrenField]="'items'" [expandedKeys]="expandedKeys"
                                            [isViewApprovalCase]="true" [treeViewType]="'multileveltreeview'"
                                            [isRequired]="true"></app-tree-view>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </kendo-expansionpanel>

                <!-- Third Card Section -->
                <kendo-expansionpanel class="card">
                    <ng-template kendoExpansionPanelTitleDirective>
                        <h4 class="card__heading">{{'Comments' |translate}}</h4>
                        <div class="card__header-icon">
                            <div class="card__header-icon--error">
                                <xrm-icon name="alert-triangle" color="red-color" [size]="18"
                                    class="sw-bold"></xrm-icon>
                            </div>

                        </div>
                    </ng-template>
                    <!-- End Card Header Section-->
                    <div class="card__body">
                        <div class="card__body--inner-wrapper">
                            <div class="row">
                                <div class="col-sm-12 col-md-12">
                                    <div class="view__screen">
                                        <ul class="list__data">
                                            <li class="list__data--item d-block">
                                                <app-kendo-label [label]="'ManagerCommentstoStaffingAgency'"
                                                    [allowMultilineText]="true" class="data-answere"
                                                    [value]="liRequestDetails?.ManagerCommentsToStaffingAgency">
                                                </app-kendo-label>
                                            </li>
                                            <li class="list__data--item d-block">
                                                <app-kendo-label [label]="'ManagerCommentsNotViewablebyStaffingAgency'"
                                                    [allowMultilineText]="true" class="data-answere"
                                                    [value]="liRequestDetails?.ManagerComments">
                                                </app-kendo-label>
                                            </li>
                                        </ul>
                                    </div>
                                    <app-multi-level-comments *ngIf="broadcastComments?.length"
                                        [label]="'PreviousBroadcastComments'" [allComments]="broadcastComments"
                                        [dateKey]="'BroadcastedOnDate'" [labelKey]="'BroadcastedBy'"
                                        [commentsKey]="'Comments'">
                                    </app-multi-level-comments>

                                    <div class="col-sm-12 col-md-12 mt-2">
                                        <div class="form-group">
                                            <app-kendo-textarea [label]="'BroadcastCommentsViewabletoStaffingAgency'"
                                                [maxCharacters]="2000" [controlName]="'comments'"
                                                [allowBullets]="true"></app-kendo-textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </kendo-expansionpanel>
                <!--End Third Card Section-->

                <!-- Footer Section-->
                <div class="page-footer text-end">
                    <button type="button" fillMode="outline" kendoButton x themeColor="primary"
                        (click)="cancelForm()">{{'Cancel' | translate}}
                    </button>
                    <ng-container *ngIf="liRequestDetails?.IsAllowedToBroadcast">
                        <button *ngIf="!checkCondition()" type="button" kendoButton x themeColor="primary"
                            appFocusOnError [formName]="broadcastForm" (click)="submitForm()">
                            {{'Broadcast' | translate}}
                        </button>
                        <button *ngIf="checkCondition()" type="button" kendoButton x themeColor="primary"
                            appFocusOnError [formName]="broadcastForm" (click)="submitForm(true)">
                            {{'Rebroadcast' | translate}}
                        </button>
                    </ng-container>
                </div>
                <!-- End Footer Section-->

            </div>
        </div>
    </form>
</div>



<!-- Request Details sidebar -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="requestSidebar2" aria-labelledby="requestSidebar2">
    <div class="offcanvas-header">
        <h5>{{'RequestDetails' | translate}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
        </button>
    </div>
    <div class="offcanvas-body">
        <div class="card">

            <!-- Card Header Section-->
            <div class="card__header">
                <h4 class="card__heading">{{'JobDetails' | translate}}</h4>
                <div class="card__header-icon">
                </div>
            </div>
            <!-- End Card Header Section-->

            <!-- Card Body Section-->
            <div class="card__body">
                <div class="row">
                    <!-- input box start -->
                    <div class="col-sm-12 col-md-12">
                        <!-- Table Data -->
                        <table class="table" aria-describedby="broadcast table">
                            <colgroup>
                                <col style="width:30%">
                                <col style="width:70%">
                            </colgroup>
                            <tbody>
                                <tr>
                                    <th>{{'SubmissionDate' | translate}}</th>
                                    <td>{{submissionDate}}</td>
                                </tr>
                                <tr>
                                    <th>{{'Sector' | translate}}</th>
                                    <td>{{liRequestDetails?.SectorName}}</td>
                                </tr>
                                <tr *ngIf="orgType1Data && orgType1Data?.IsVisible">
                                    <th>{{orgType1Data.OrgName}}</th>
                                    <td>{{liRequestDetails?.Orglevel1Name}}</td>
                                </tr>
                                <tr *ngIf="orgType2Data && orgType2Data?.IsVisible">
                                    <th>{{orgType2Data.OrgName}}</th>
                                    <td>{{liRequestDetails?.Orglevel2Name}}</td>
                                </tr>
                                <tr *ngIf="orgType3Data && orgType3Data?.IsVisible">
                                    <th>{{orgType3Data.OrgName}}</th>
                                    <td>{{liRequestDetails?.Orglevel3Name}}</td>
                                </tr>
                                <tr *ngIf="orgType4Data && orgType4Data?.IsVisible">
                                    <th>{{orgType4Data.OrgName}}</th>
                                    <td>{{liRequestDetails?.Orglevel4Name}}</td>
                                </tr>
                                <tr>
                                    <th>{{'LaborCategory' | translate}}</th>
                                    <td>{{liRequestDetails?.LaborCategoryName}}</td>
                                </tr>
                                <tr>
                                    <th>{{'CostAccountingCode' | translate}}</th>
                                    <td>{{liRequestDetails?.CostAccountingCode}}</td>
                                </tr>
                                <tr>
                                    <th>{{'CostAccountingCodeDescription' | translate}}</th>
                                    <td>{{liRequestDetails?.DefaultCostCenterDescription}}</td>
                                </tr>
                                <tr>
                                    <th>{{'StartDateNoLaterThan' | translate}}</th>
                                    <td>{{startNoLaterThan}}</td>
                                </tr>
                                <tr *ngIf="!showControl()">
                                    <th>{{'PrimaryApprover' | translate}}</th>
                                    <td>{{liRequestDetails?.PrimaryTimeApproverName}}</td>
                                </tr>
                                <tr *ngIf="showControl()">
                                    <th>{{'PrimaryApprover' | translate}}</th>
                                    <td>Multiple Approver</td>
                                </tr>
                                <tr *ngIf="!showControl()">
                                    <th>{{'AlternateApprover' | translate}}</th>
                                    <td>{{liRequestDetails?.AlternateTimeApproverName}}</td>
                                </tr>
                                <tr *ngIf="showControl()">
                                    <th>{{'AlternateApprover' | translate}}</th>
                                    <td>Multiple Approver</td>
                                </tr>
                                <tr *ngIf="showDrugField()">
                                    <th>{{'DrugScreenId' | translate}}</th>
                                    <td>{{liRequestDetails?.IsDrugTestRequired ? 'Yes' : 'No'}} </td>
                                </tr>
                                <tr *ngIf="showaBackgroundField()">
                                    <th>{{'BackgroundChecksTitle' | translate}}</th>
                                    <td>{{liRequestDetails?.IsBackgrounCheckRequired ? 'Yes' : 'No'}}</td>
                                </tr>

                            </tbody>
                        </table>

                        <!-- input box start -->
                        <div class="col-sm-12 col-md-12">
                            <div class="form-group">
                                <div class="audit-log">
                                    <div class="list-view">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <app-contractor-details #contractor [isEditMode]="true"
                                                    [isViewMode]="true" [parentData]="contractorGridData"
                                                    [startDate]="startDate" [startDateNoLaterThan]="startNoLaterThan"
                                                    [tenurePolicyApplicable]="tenurePolicyApplicable"
                                                    [tenureLimitType]="tenureLimitType"
                                                    [requsitionTenure]="requsitionTenure" [wageRate]="baseWageRate"
                                                    [shiftDetails]="shiftDetails" [weekDaysArray]="weekDaysArray"
                                                    [benefitAdderList]="benefitAdderList"
                                                    (totalContractorsEmitter)="handleTotalContractors($event)"
                                                    (onDataPicked)="getContractorData($event)">
                                                </app-contractor-details>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- input box end -->

                        <!-- input box start -->
                        <div class="col-sm-12 col-md-12">
                            <!-- Table Data -->
                            <table class="table" aria-describedby="position description">
                                <colgroup>
                                    <col style="width:30%">
                                    <col style="width:70%">
                                </colgroup>
                                <tbody>
                                    <tr>
                                        <th> <app-kendo-label [label]="'EstimatedCost'"
                                                [isCurrency]="true"></app-kendo-label></th>
                                        <td><app-kendo-label [isCurrency]="true"
                                                [value]="liRequestDetails?.EstimatedCost"></app-kendo-label></td>
                                    </tr>
                                    <tr class="benefit-adder-details">
                                        <th colspan="2">
                                            <app-benefit-adder *ngIf="recordId" [sectorId]="sectorId"
                                                [locationId]="locationId" [reqLibraryId]="reqLibraryId"
                                                [requestId]="recordId" [showInOneLine]="true" [entityId]="entityId"
                                                (onDataPicked)="getBenefitAdderData($event)"></app-benefit-adder>
                                        </th>
                                    </tr>
                                    <tr class="position__description-details">
                                        <th>{{'PositionDescription' | translate}}</th>
                                        <app-kendo-label [allowMultilineText]="true" class="data-answere"
                                            [value]="liRequestDetails?.PositionDescription">
                                        </app-kendo-label>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- input box end -->
                    </div>
                </div>
            </div>
            <!--End Card Body Section-->

        </div>
        <!-- Card Section-->


        <!-- Card Section-->
        <div class="card" [hidden]="hasApproverDataLength">
            <!-- Card Header Section-->
            <div class="card__header">
                <h4 class="card__heading">{{'ApproverDetails' | translate}}</h4>
            </div>
            <!-- End Card Header Section-->
            <!-- Card Body Section-->
            <div class="row">
                <!-- input box start -->
                <div class="col-sm-12 col-md-12">
                    <ng-container *ngIf="sectorId > 0">
                        <app-approval-widget-v2 [entityId]="entityId" [isView]="true" [isRecordId]="recordId"
                            [isheading]="false" [heading]="'ApproverDetails'" [sector]="sectorId"
                            [approvalInfo]="approvalConfigWidgetData"
                            (onApproverSubmitReq)="onApproverSubmit($event)"></app-approval-widget-v2>
                    </ng-container>
                </div>
                <!-- input box end -->
            </div>
        </div>


        <!-- Card Section-->
        <div class="card" [hidden]="!hasUDFLength">
            <!-- Card Header Section-->
            <div class="card__header">
                <h4 class="card__heading">{{'OtherDetailsUDFs' | translate}}</h4>
            </div>
            <!-- End Card Header Section-->
            <!-- Card Body Section-->
            <div class="row">
                <!-- input box start -->
                <div class="col-sm-12 col-md-12">
                    <ng-container *ngIf="sectorId > 0">
                        <app-udf-implementation [entityId]="entityId" [sectorId]="sectorId" [recordUKey]="recordUKey"
                            [parentsInfos]="udfCommonMethods.getParentsInfo()" [actionTypeId]="actionTypeId"
                            [showTitle]="false" (hasUDFLength)="getUDFLength($event)">
                        </app-udf-implementation>

                    </ng-container>
                </div>
                <!-- input box end -->
            </div>
        </div>

        <!-- Card Section-->
        <div class="card" [hidden]="!hasDMSLength">
            <!-- Card Header Section-->
            <div class="card__header">
                <h4 class="card__heading">{{'Documents' | translate}}</h4>
            </div>
            <!-- End Card Header Section-->
            <!-- Card Body Section-->
            <div class="row">
                <ng-container>
                    <app-dms-implementation #dms [workFlowId]="entityId" [userGroupId]="userGroupId"
                        [sectorId]="sectorId" [uploadStageId]="uploadStageId" [actionTypeId]="actionTypeId"
                        [recordId]="recordId" [showTitle]="false" [processingId]="processingId"
                        (hasDMSLength)="getDMSLength($event)">
                    </app-dms-implementation>
                </ng-container>
            </div>
            <!-- End Card Body Section-->
        </div>
        <!-- Edn Card Section-->
    </div>
</div>
<!-- End Request Details sidebar -->